(function(e,c,a,g){var d="pusherNotifications",f={notificationsCounter:".notificationsCounter",noNotifications:".noNotifications"};function b(i,h){this.element=i;this.settings=e.extend({},f,h);this._defaults=f;this._name=d;this.init()}e.extend(b.prototype,{getTemplate:function(){return'<li><a href="#"><div class="pull-left notificationIcon"><i class="iconClass"></i></div><h4>notificationTitle<small><i class="fa fa-clock-o"></i> timeAgo</small></h4><p>notificationMessage</p></a></li>'},prepareTemplate:function(i){var h=this.getTemplate();h=h.replace("iconClass",i.notification.icon_class);h=h.replace("#",i.notification.link);h=h.replace("notificationTitle",i.notification.title);h=h.replace("notificationMessage",i.notification.message);h=h.replace("timeAgo",i.notification.time_ago);return h},incrementCounter:function(){var h=this;var i=parseInt(e(h.settings.notificationsCounter).text());e(h.settings.notificationsCounter).text(i+1);e(h.settings.notificationsCounter).addClass("bounce");setTimeout(function(){e(h.settings.notificationsCounter).removeClass("bounce")},1000)},init:function(){var h=this;this.pusher=new Pusher(this.settings.pusherKey);this.pusherChannel=this.pusher.subscribe("dervis.notifications."+this.settings.loggedInUserId);this.pusherChannel.bind("Ignite\\Messaging\\Events\\BroadcastNotification",function(i){if(e(h.settings.noNotifications).length){e(h.settings.noNotifications).remove()}e(h.element).prepend(h.prepareTemplate(i));e(h.element).find("li").first().addClass("animated pulse");h.incrementCounter()})}});e.fn[d]=function(h){return this.each(function(){if(!e.data(this,"plugin_"+d)){e.data(this,"plugin_"+d,new b(this,h))}})}})(jQuery,window,document);